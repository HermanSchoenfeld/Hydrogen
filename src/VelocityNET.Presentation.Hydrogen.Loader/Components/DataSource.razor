@using VelocityNET.Presentation.Hydrogen.Models
@inherits ComponentWithViewModel<DataSourceViewModel>


<li class="nav-item d-flex align-items-center justify-content-center mb-4">
    <a role="button" class="btn btn-sm btn-info shadow-sm dropdown-toggle data-source-btn" title="@ViewModel!.ActiveServer.Name - @ViewModel.ActiveServer.Uri"
       id="datasource-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fas fa-fw fa-cogs"></i>
        <span>Connected</span>
    </a>


    <!-- Dropdown - Alerts -->
    <div class="dropdown-list dropdown-menu shadow animated--fade-in"
         aria-labelledby="datasource-dropdown">
        <h6 class="dropdown-header bg-info border-info">
            Servers
        </h6>

        @foreach (Server options in ViewModel!.AvailableServers)
        {
            bool active = IsActive(options.Name);

            <a class="dropdown-item d-flex align-items-center" role="button" @onclick="@(() => ViewModel!.OnSelectServerAsync(options))">
                @if (active)
                {
                    <div class="mr-3">
                        <i class="fas fa-check"></i>
                    </div>
                }
                <div>
                    <div class="small text-gray-500">@options.Name</div>
                    <p>@options.Uri</p>
                </div>
            </a>
        }
        <a class="dropdown-item text-center small text-gray-500" href="/servers"> Servers</a>
    </div>
</li>

@code
{
    public bool IsActive(string name) => ViewModel!.ActiveServer.Name == name;
}